#!/bin/sh

# Ask the user to mount the private directory
terminator -f -e "~/.dotfiles/sbin/ui_mount"

# Check that the Private directory has been mounted before continuing
_path=$(realpath ~)
if ! mount | grep -q "^$_path/\.Private on $_path/Private type ecryptfs"
then
    exit 1
fi

# Mount the connman settings
# As these contain wifi passwords etc, these are stored in my encrypted
# ~/Private/ directory rather than in plaintext.
mount /var/lib/connman

# Now that connman has its settings, its safe to the daemon
sudo connmand

